// Mapping of parser material names
export const MATERIAL_MAPPINGS = {
  
  // Ingots
  IronIngot: { id: "iron-ingot", name: "Iron Ingot", icon: "/icons/materials/iron-ingot.png" },
  CopperIngot: { id: "copper-ingot", name: "Copper Ingot", icon: "/icons/materials/copper-ingot.png" },
  BronzeIngot: { id: "bronze-ingot", name: "Bronze Ingot", icon: "/icons/materials/bronze-ingot.png" },
  GoldIngot: { id: "gold-ingot", name: "Gold Ingot", icon: "/icons/materials/gold-ingot.png" },
  SteelIngot: { id: "steel-ingot", name: "Steel Ingot", icon: "/icons/materials/steel-ingot.png" },
  SilverIngot: { id: "silver-ingot", name: "Silver Ingot", icon: "/icons/materials/silver-ingot.png" },
  
  // Basic Materials
  Stone: { id: "stone", name: "Stone", icon: "/icons/materials/stone.png" },
  Clay: { id: "clay", name: "Clay", icon: "/icons/materials/clay.png" },
  WoodBoard: { id: "plank", name: "Wood Board", icon: "/icons/materials/plank.png" },
  Logs: { id: "logs", name: "Logs", icon: "/icons/materials/logs.png" },
  RottenLog: { id: "rotten-log", name: "Rotten Log", icon: "/icons/materials/rotten-log.png" },
  Brick: { id: "brick", name: "Brick", icon: "/icons/materials/brick.png" },
  Glass: { id: "glass", name: "Glass", icon: "/icons/materials/glass.png" },
  Limestone: { id: "limestone", name: "Limestone", icon: "/icons/materials/limestone.png" },
  PortalSigil: { id: "portal-sigil", name: "Portal Sigil", icon: "/icons/materials/portal-sigil.png" },
  GloomFungus: { id: "gloomfungus", name: "Gloomfungus", icon: "/icons/materials/gloomfungus.png" },
  
  // Crafted Items
  Nails: { id: "iron-nails", name: "Nails", icon: "/icons/materials/iron-nails.png" },
  WoodGear: { id: "small-wooden-gear", name: "Wood Gear", icon: "/icons/materials/small-wooden-gear.png" },
  LargeWoodGear: { id: "large-wooden-gear", name: "Large Wood Gear", icon: "/icons/materials/large-wooden-gear.png" },
  SteelGear: { id: "steel-gear", name: "Steel Gear", icon: "/icons/materials/steel-gear.png" },
  LinenRope: { id: "linen-rope", name: "Linen Rope", icon: "/icons/materials/linen-rope.png" },
  LinenThread: { id: "linen-thread", name: "Linen Thread", icon: "/icons/materials/linen-thread.png" },
  BronzeRivet: { id: "bronze-rivet", name: "Bronze Rivet", icon: "/icons/materials/bronze-rivet.png" },
  CopperBearing: { id: "copper-bearing", name: "Copper Bearing", icon: "/icons/materials/copper-bearing.png" },
  
  // Seeds
  FlaxSeed: { id: "flax-seeds", name: "Flax Seeds", icon: "/icons/materials/flax-seeds.png" },
  ChamomileSeed: { id: "chamomile-seeds", name: "Chamomile Seeds", icon: "/icons/materials/chamomile-seeds.png" },
  GentianSeed: { id: "gentian-seeds", name: "Gentian Seeds", icon: "/icons/materials/gentian-seeds.png" },
  LavenderSeed: { id: "lavender-seeds", name: "Lavender Seeds", icon: "/icons/materials/lavender-seeds.png" },
  RedcurrantSeed: { id: "redcurrant-seeds", name: "Redcurrant Seeds", icon: "/icons/materials/redcurrant-seeds.png" },
  SageSeed: { id: "sage-seeds", name: "Sage Seeds", icon: "/icons/materials/sage-seeds.png" },
  WorldTreeSeed: { id: "world-tree-seeds", name: "World Tree Seeds", icon: "/icons/materials/world-tree-seed.png" },
  
  // Default for unknown/new materials
  None: { id: "none", name: "None", icon: "/icons/materials/unknown.png" },
};

// Mapping of parser building names
export const BUILDING_MAPPINGS = {
  AdvancedAlembic: { id: "advancedalembic", name: "Advanced Alembic", icon: "/icons/buildings/advancedalembic.png" },
  AdvancedAthanor: { id: "advancedathanor", name: "Advanced Athanor", icon: "/icons/buildings/advancedathanor.png" },
  AdvancedBlender: { id: "advancedblender", name: "Advanced Blender", icon: "/icons/buildings/advancedblender.png" },
  AdvancedShaper: { id: "advancedshaper", name: "Advanced Shaper", icon: "/icons/buildings/advancedshaper.png" },
  Alembic: { id: "alembic", name: "Alembic", icon: "/icons/buildings/alembic.png" },
  AetherShaper: { id: "aethershaper", name: "Arcane Shaper", icon: "/icons/buildings/arcaneshaper.png" },
  Assembler: { id: "assembler", name: "Assembler", icon: "/icons/buildings/assembler.png" },
  Athanor: { id: "athanor", name: "Athanor", icon: "/icons/buildings/athanor.png" },
  AutoCheckout: { id: "autocheckout", name: "Auto Checkout", icon: "/icons/buildings/autocheckout.png" },
  AutoNursery: { id: "autonursery", name: "Auto Nursery", icon: "/icons/buildings/autonursery.png" },
  Beam3: { id: "beam3", name: "Beam", icon: "/icons/buildings/beam2.png" },
  Belt: { id: "belt", name: "Belt", icon: "/icons/buildings/belt.png" },
  BeltInclinedUp: { id: "beltinclinedup", name: "Belt Inclined Up", icon: "/icons/buildings/beltinclinedup.png" },
  BeltSlopeUp: { id: "beltslopeup", name: "Belt Slope Up", icon: "/icons/buildings/beltslopeup.png" },
  Blender: { id: "blender", name: "Blender", icon: "/icons/buildings/blender.png" },
  BounceShroom: { id: "bounceshroom", name: "Bounce Shroom", icon: "/icons/buildings/bounceshroom.png" },
  BrickBlock: { id: "brickblock", name: "Brick Block", icon: "/icons/buildings/brickblock.png" },
  BronzeBlock: { id: "bronzeblock", name: "Bronze Block", icon: "/icons/buildings/bronzeblock.png" },
  Candle: { id: "candle", name: "Candle", icon: "/icons/buildings/candle.png" },
  Cannon: { id: "cannon", name: "Cannon", icon: "/icons/buildings/cannon.png" },
  catapult: { id: "catapult", name: "Catapult", icon: "/icons/buildings/catapult.png" },
  Cauldron: { id: "cauldron", name: "Cauldron", icon: "/icons/buildings/cauldron.png" },
  CheckoutTable: { id: "checkouttable", name: "Checkout Table", icon: "/icons/buildings/checkouttable.png" },
  ConveyerLift_Upwards: { id: "conveyerlift_upwards", name: "Conveyer Lift Upwards", icon: "/icons/buildings/conveyerlift.png" },
  ConveyorTunnel: { id: "conveyortunnel", name: "Conveyor Tunnel", icon: "/icons/buildings/conveyortunnel.png" },
  CrossTunnel: { id: "crosstunnel", name: "Crossway Tunnel", icon: "/icons/buildings/crosstunnel.png" },
  CopperBlock: { id: "copperblock", name: "Copper Block", icon: "/icons/buildings/copperblock.png" },
  Crucible: { id: "crucible", name: "Crucible", icon: "/icons/buildings/crucible.png" },
  DrawBridge: { id: "drawbridge", name: "Draw Bridge", icon: "/icons/buildings/drawbridge.png" },
  EnhancedGrinder: { id: "enhancedgrinder", name: "Enhanced Grinder", icon: "/icons/buildings/enhancedgrinder.png" },
  Extractor: { id: "extractor", name: "Extractor", icon: "/icons/buildings/extractor.png" },
  Filter_Vert: { id: "filter_vert", name: "Filter Splitter", icon: "/icons/buildings/filtersplitter.png" },
  FrameSingle: { id: "framesingle", name: "Frame Single", icon: "/icons/buildings/frame.png" },
  Grinder: { id: "grinder", name: "Grinder", icon: "/icons/buildings/grinder.png" },
  Hopper: { id: "hopper", name: "Hopper", icon: "/icons/buildings/hopper.png" },
  IronBlock: { id: "ironblock", name: "Iron Block", icon: "/icons/buildings/ironblock.png" },
  IronSmelter: { id: "ironsmelter", name: "Iron Smelter", icon: "/icons/buildings/ironsmelter.png" },
  IronStand: { id: "ironstand", name: "Lab Stands", icon: "/icons/buildings/labstands.png" },
  JunkBarrel: { id: "junkbarrel", name: "Junk Barrel", icon: "/icons/buildings/junkbarrel.png" },
  Kiln: { id: "kiln", name: "Kiln", icon: "/icons/buildings/kiln.png" },
  KnowledgeAltar: { id: "knowledgealtar", name: "Knowledge Altar", icon: "/icons/buildings/knowledgealtar.png" },
  LargeStand: { id: "largestand", name: "Large Stand", icon: "/icons/buildings/largestand.png" },
  Merger_Vert: { id: "merger_vert", name: "Priority Merger", icon: "/icons/buildings/prioritymerger.png" },
  MetalContainer: { id: "metalcontainer", name: "Metal Container", icon: "/icons/buildings/metalcontainer.png" },
  MetalStand: { id: "metalstand", name: "Metal Stand", icon: "/icons/buildings/metalstand.png" },
  NoticeBoard: { id: "noticeboard", name: "Notice Board", icon: "/icons/buildings/blackboard.png" },
  "Omni-Machine": { id: "omni-machine", name: "Advanced Assembler", icon: "/icons/buildings/advancedassembler.png" },
  ParadoxCrucible: { id: "paradoxcrucible", name: "Paradox Crucible", icon: "/icons/buildings/paradoxcrucible.png" },
  Pipe: { id: "pipe", name: "Pipe", icon: "/icons/buildings/pipe.png" },
  Platform_Wood: { id: "platform_wood", name: "Platform Wood", icon: "/icons/buildings/platformwood.png" },
  Portal_AlchGuild: { id: "portal_alchguild", name: "Purchasing Portal", icon: "/icons/buildings/purchasingportal.png" },
  Portal_Bank: { id: "portal_bank", name: "Portal Bank", icon: "/icons/buildings/portalbank.png" },
  Portal_Wholesaling: { id: "portal_wholesaling", name: "Dispatch Portal", icon: "/icons/buildings/dispatchportal.png" },
  Processor: { id: "processor", name: "Processor", icon: "/icons/buildings/processor.png" },
  Refiner: { id: "refiner", name: "Refiner", icon: "/icons/buildings/refiner.png" },
  RelicStandSmall: { id: "relicstandsmall", name: "Relic Stand Small", icon: "/icons/buildings/simplestall.png" },
  Shaper: { id: "shaper", name: "Shaper", icon: "/icons/buildings/shaper.png" },
  SmallContainer: { id: "smallcontainer", name: "Small Container", icon: "/icons/buildings/smallcontainer.png" },
  SmallPlatform: { id: "smallplatform", name: "Reinforced Platform", icon: "/icons/buildings/reinforcedplatform.png" },
  SphereFlask: { id: "sphereflask", name: "Sphere Flask", icon: "/icons/buildings/sphereflask.png" },
  Splitter_Vert: { id: "splitter_vert", name: "Priority Splitter", icon: "/icons/buildings/prioritysplitter.png" },
  StackableCrucible: { id: "stackablecrucible", name: "Stackable Crucible", icon: "/icons/buildings/stackablecrucible.png" },
  StoneBlock: { id: "stoneblock", name: "Stone Block", icon: "/icons/buildings/stoneblock.png" },
  StoneCrusher: { id: "stonecrusher", name: "Stone Crusher", icon: "/icons/buildings/stonecrusher.png" },
  StoneFurnace: { id: "stonefurnace", name: "Stone Furnace", icon: "/icons/buildings/stonefurnace.png" },
  StoneStove: { id: "stonestove", name: "Stone Stove", icon: "/icons/buildings/stonestove.png" },
  TableSaw: { id: "tablesaw", name: "Table Saw", icon: "/icons/buildings/tablesaw.png" },
  ThermalExtractor: { id: "thermalextractor", name: "Thermal Extractor", icon: "/icons/buildings/thermalextractor.png" },
  WallShelf: { id: "wallshelf", name: "Wall Shelf", icon: "/icons/buildings/wallshelf.png" },
  WoodBlock: { id: "woodblock", name: "Wood Block", icon: "/icons/buildings/woodblock.png" },
  WoodContainer: { id: "woodcontainer", name: "Wood Container", icon: "/icons/buildings/woodcontainer.png" },
  WoodCrate: { id: "woodcrate", name: "Wood Crate", icon: "/icons/buildings/woodcrate.png" },
  WoodTable: { id: "woodtable", name: "Wood Table", icon: "/icons/buildings/woodtable.png" },
  WorldTreeNursery: { id: "worldtreenursery", name: "World Tree Nursery", icon: "/icons/buildings/worldtreenursery.png" },
};

// Transform parsed materials data to our format
export function transformParsedMaterials(parsedMaterials) {
  if (!parsedMaterials || typeof parsedMaterials !== 'object' || Array.isArray(parsedMaterials)) {
    return [];
  }
  
  try {
    return Object.entries(parsedMaterials)
      .filter(([name, quantity]) => name !== "None" && quantity > 0)
      .map(([name, quantity]) => {
        const mapping = MATERIAL_MAPPINGS[name];
        return {
          id: mapping?.id || name.toLowerCase(),
          name: mapping?.name || name,
          quantity: quantity,
          icon: mapping?.icon || "/icons/materials/unknown.png",
        };
      })
      .sort((a, b) => b.quantity - a.quantity);
  } catch (error) {
    console.error("Error transforming materials:", error);
    return [];
  }
}

// Transform parsed buildings data to our format
export function transformParsedBuildings(parsedBuildings) {
  if (!parsedBuildings || typeof parsedBuildings !== 'object' || Array.isArray(parsedBuildings)) {
    return [];
  }
  
  try {
    return Object.entries(parsedBuildings)
      .filter(([name, quantity]) => quantity > 0)
      .map(([name, quantity]) => {
        const mapping = BUILDING_MAPPINGS[name];
        return {
          id: mapping?.id || name.toLowerCase(),
          name: mapping?.name || name,
          quantity: quantity,
          icon: mapping?.icon || "/icons/buildings/unknown.png",
        };
      })
      .sort((a, b) => b.quantity - a.quantity);
  } catch (error) {
    console.error("Error transforming buildings:", error);
    return [];
  }
}
